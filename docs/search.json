[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Exam-01",
    "section": "",
    "text": "First, we read the data and take a look at how does it look.\n\n\nCode\nworld = read_csv(\"data/world-3.csv\")\n\nworld |&gt; \n  sample_n(10) |&gt; \n  arrange(country) |&gt; \n  gt() |&gt; \n  fmt_number(\n    columns = c(6, 10, 11, 12),\n    decimals = 2\n  )\n\n\n\n\n\n\nTable 1:  Sample of (n=10) observations of the World data \n  \n    \n    \n      country\n      region\n      lifeexpf\n      lifeexpm\n      literacy\n      popincr\n      babymort\n      birthr\n      deathr\n      gdp\n      aidsr\n      bdratio\n      fertilty\n      literacym\n      literacyf\n    \n  \n  \n    Argentina\nLatin America\n75\n68\n95\n1.30\n25.6\n20.0\n9.0\n3.53\n1.63\n2.22\n2.80\n96\n95\n    Azerbaijan\nMiddle East\n75\n67\n98\n1.40\n35.0\n23.0\n7.0\n3.48\nNA\n3.29\n2.80\n100\n100\n    Czech Rep.\nEast Europe\n77\n69\nNA\n0.21\n9.3\n13.0\n11.1\n3.86\n0.86\n1.17\n1.84\nNA\nNA\n    Greece\nOECD\n80\n75\n93\n0.84\n8.2\n10.0\n10.0\n3.91\n1.55\n1.00\n1.50\n98\n89\n    Hong Kong\nPacific/Asia\n80\n75\n77\n−0.09\n5.8\n13.0\n6.0\n4.17\n1.11\n2.17\n1.40\n90\n64\n    Japan\nPacific/Asia\n82\n76\n99\n0.30\n4.4\n11.0\n7.0\n4.30\n0.89\n1.57\n1.55\nNA\nNA\n    Libya\nMiddle East\n65\n62\n64\n3.70\n63.0\n45.0\n8.0\n3.77\n0.71\n5.62\n6.40\n75\n50\n    Panama\nLatin America\n78\n71\n88\n1.94\n16.5\n25.0\n5.0\n3.38\n1.90\n5.00\n2.90\n88\n88\n    Taiwan\nPacific/Asia\n78\n72\n91\n0.92\n5.1\n15.6\nNA\n3.85\nNA\nNA\nNA\nNA\nNA\n    Tanzania\nAfrica\n45\n41\n46\n2.50\n110.0\n46.0\n19.0\n2.42\n2.65\n2.42\n6.20\n62\n31\n  \n  \n  \n\n\n\n\n\nThen, we make a description of all the numeric values.\n\n\nCode\nworld |&gt; \n  select(where(is.numeric)) |&gt; \n  skim() |&gt; \n  select(-1) |&gt; \n  gt() |&gt; \n  fmt_number(\n    columns = 3:10,\n    decimals = 2\n  ) |&gt; \n  cols_label(\n    skim_variable = \"variable\",\n    n_missing = \"missing\",\n    numeric.mean = \"mean\",\n    numeric.sd = \"std\",\n    numeric.p0 = \"p0\",\n    numeric.p25 = \"p25\",\n    numeric.p50 = \"p50\",\n    numeric.p75 = \"p75\",\n    numeric.p100 = \"p100\",\n    numeric.hist = \"histogram\"\n  ) |&gt; \n  cols_align(\n    columns = -1,\n    align = \"center\"\n  )\n\n\n\n\n\n\nTable 2:  Summary of numeric variables for the World data \n  \n    \n    \n      variable\n      missing\n      complete_rate\n      mean\n      std\n      p0\n      p25\n      p50\n      p75\n      p100\n      histogram\n    \n  \n  \n    lifeexpf\n0\n1.00\n70.16\n10.57\n43.00\n67.00\n74.00\n78.00\n82.00\n▂▂▁▅▇\n    lifeexpm\n0\n1.00\n64.92\n9.27\n41.00\n61.00\n67.00\n72.00\n76.00\n▂▂▂▇▇\n    literacy\n2\n0.98\n78.34\n22.88\n18.00\n63.00\n88.00\n98.00\n100.00\n▁▂▂▂▇\n    popincr\n0\n1.00\n1.68\n1.20\n−0.30\n0.52\n1.80\n2.68\n5.24\n▇▅▇▃▁\n    babymort\n0\n1.00\n42.31\n38.08\n4.00\n9.30\n27.70\n63.00\n168.00\n▇▃▁▂▁\n    birthr\n0\n1.00\n25.92\n12.36\n10.00\n14.00\n25.00\n35.00\n53.00\n▇▃▃▃▂\n    deathr\n1\n0.99\n9.56\n4.25\n2.00\n6.85\n9.00\n11.00\n24.00\n▅▇▅▁▁\n    gdp\n0\n1.00\n3.42\n0.62\n2.09\n3.00\n3.48\n3.87\n4.37\n▃▅▇▇▇\n    aidsr\n3\n0.97\n1.38\n0.71\n0.00\n0.77\n1.38\n1.86\n3.18\n▃▇▇▃▂\n    bdratio\n1\n0.99\n3.20\n2.12\n0.92\n1.54\n2.67\n4.18\n14.00\n▇▃▁▁▁\n    fertilty\n2\n0.98\n3.56\n1.90\n1.30\n1.88\n3.05\n5.00\n8.19\n▇▅▂▃▁\n    literacym\n24\n0.78\n78.73\n20.45\n28.00\n63.00\n87.00\n96.00\n100.00\n▁▁▃▂▇\n    literacyf\n24\n0.78\n67.26\n28.61\n9.00\n45.00\n71.00\n93.00\n100.00\n▂▂▂▃▇\n  \n  \n  \n\n\n\n\n\nWe see from Table 2 that some of the variables have missing data, specifically, the literacym variable has complete rate of 78%. Also, the standard deviation from each variable is in a different scale, ranging from 0.62 units in gdp to 38.08 units in babymort. This makes sense because some variables are in a log-scale.\n\n\n\n\n\n\nNote\n\n\n\nGiven this scenario, we would prefer to perform pca with the correlation matrix.\n\n\n\n\n\n\n\nWe perform two principal component analysis using: a) the covariance matrix and b) the correlation matrix.\n\n\nCode\n# get complete cases\nworld_complete = world |&gt; \n  drop_na()\n\n# for the covariance matrix\npca_cov = world_complete |&gt; \n  select(-c(1,2)) |&gt; \n  prcomp()\n\n# for the correlation matrix\npca_cor = world_complete |&gt; \n  select(-c(1,2)) |&gt; \n  prcomp(scale = TRUE)\n\n# matrix with loadings\nloadings = bind_rows(\n  pca_cov |&gt; \n  tidy(matrix = \"rotation\") |&gt; \n  mutate(matrix = factor(\"covariance\")),\n  pca_cor |&gt; \n  tidy(matrix = \"rotation\") |&gt; \n  mutate(matrix = factor(\"correlation\"))\n)\n\n\nWe plot the differences for the first two pcs using each method.\nOption 1:\n\n\nCode\nplot_01 = tibble(cor = pca_cor$rotation[,1], cov = pca_cov$rotation[,1]) \nplot_02 = tibble(cor = pca_cor$rotation[,2], cov = pca_cov$rotation[,2]) \n\np01 = plot_01 |&gt; \n  ggplot() +\n  geom_point(aes(x = cor, y = cov), size = 3) +\n  geom_abline(intercept = 0, slope = 1, linetype = \"dashed\", color = \"red\", size = 1.3) +\n  xlim(c(-0.65, 0.65)) +\n  ylim(c(-0.65, 0.65)) +\n  theme_bw() +\n  xlab(\"PC1 (cor)\") +\n  ylab(\"PC1 (cov)\")\n\np02 = plot_02 |&gt; \n  ggplot() +\n  geom_point(aes(x = cor, y = cov), size = 3) +\n  geom_abline(intercept = 0, slope = 1, linetype = \"dashed\", color = \"red\", size = 1.3) +\n  xlim(c(-0.65, 0.65)) +\n  ylim(c(-0.65, 0.65)) +\n  theme_bw() +\n  xlab(\"PC2 (cor)\") +\n  ylab(\"PC2 (cov)\")\n\np01 | p02\n\n\n\n\n\nFigure 1: Representations of the loadings\n\n\n\n\nOption 2:\n\n\nCode\nloadings |&gt; \n  filter(PC == c(1,2)) |&gt; \n  ggplot() +\n  geom_density(aes(x = value, fill = matrix, color = matrix), alpha = 0.6) +\n  facet_wrap(vars(PC), nrow = 1) +\n  theme_bw() +\n  theme(legend.position = \"bottom\") +\n  scale_color_brewer(palette = \"Pastel1\") +\n  scale_fill_brewer(palette = \"Pastel1\")\n\n\n\n\n\nFigure 2: Representations of the loadings\n\n\n\n\nOption 3:\n\n\nCode\nloadings |&gt; \n  filter(PC == c(1,2)) |&gt; \n  ggplot() +\n  geom_boxplot(aes(x = value, y = matrix, fill = matrix, color = matrix), alpha = 0.6) +\n  facet_wrap(vars(PC), nrow = 1) +\n  theme_bw() +\n  theme(legend.position = \"none\") +\n  scale_color_brewer(palette = \"Accent\") +\n  scale_fill_brewer(palette = \"Accent\")\n\n\n\n\n\nFigure 3: Representations of the loadings\n\n\n\n\nOption 4:\n\n\nCode\np03 = pca_cov %&gt;%\n  tidy(matrix = \"eigenvalues\") %&gt;%\n  ggplot(aes(PC, percent)) +\n  geom_col(fill = \"#56B4E9\", alpha = 0.8) +\n  xlab(\"PCA (cov)\") +\n  scale_x_continuous(breaks = 1:9) +\n  scale_y_continuous(\n    labels = scales::percent_format(),\n    expand = expansion(mult = c(0, 0.01))\n  ) +\n  theme_minimal_hgrid(12)\n\np04 = pca_cor %&gt;%\n  tidy(matrix = \"eigenvalues\") %&gt;%\n  ggplot(aes(PC, percent)) +\n  xlab(\"PCA (cor)\") +\n  geom_col(fill = \"#56B4E9\", alpha = 0.8) +\n  scale_x_continuous(breaks = 1:9) +\n  scale_y_continuous(\n    labels = scales::percent_format(),\n    expand = expansion(mult = c(0, 0.01))\n  ) +\n  theme_minimal_hgrid(12)\n\np03 | p04\n\n\n\n\n\nFigure 4: Representations of the loadings\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nworld_complete = pca_cor |&gt;\n  augment(world_complete)"
  },
  {
    "objectID": "index.html#pre-work",
    "href": "index.html#pre-work",
    "title": "Exam-01",
    "section": "",
    "text": "First, we read the data and take a look at how does it look.\n\n\nCode\nworld = read_csv(\"data/world-3.csv\")\n\nworld |&gt; \n  sample_n(10) |&gt; \n  arrange(country) |&gt; \n  gt() |&gt; \n  fmt_number(\n    columns = c(6, 10, 11, 12),\n    decimals = 2\n  )\n\n\n\n\n\n\nTable 1:  Sample of (n=10) observations of the World data \n  \n    \n    \n      country\n      region\n      lifeexpf\n      lifeexpm\n      literacy\n      popincr\n      babymort\n      birthr\n      deathr\n      gdp\n      aidsr\n      bdratio\n      fertilty\n      literacym\n      literacyf\n    \n  \n  \n    Argentina\nLatin America\n75\n68\n95\n1.30\n25.6\n20.0\n9.0\n3.53\n1.63\n2.22\n2.80\n96\n95\n    Azerbaijan\nMiddle East\n75\n67\n98\n1.40\n35.0\n23.0\n7.0\n3.48\nNA\n3.29\n2.80\n100\n100\n    Czech Rep.\nEast Europe\n77\n69\nNA\n0.21\n9.3\n13.0\n11.1\n3.86\n0.86\n1.17\n1.84\nNA\nNA\n    Greece\nOECD\n80\n75\n93\n0.84\n8.2\n10.0\n10.0\n3.91\n1.55\n1.00\n1.50\n98\n89\n    Hong Kong\nPacific/Asia\n80\n75\n77\n−0.09\n5.8\n13.0\n6.0\n4.17\n1.11\n2.17\n1.40\n90\n64\n    Japan\nPacific/Asia\n82\n76\n99\n0.30\n4.4\n11.0\n7.0\n4.30\n0.89\n1.57\n1.55\nNA\nNA\n    Libya\nMiddle East\n65\n62\n64\n3.70\n63.0\n45.0\n8.0\n3.77\n0.71\n5.62\n6.40\n75\n50\n    Panama\nLatin America\n78\n71\n88\n1.94\n16.5\n25.0\n5.0\n3.38\n1.90\n5.00\n2.90\n88\n88\n    Taiwan\nPacific/Asia\n78\n72\n91\n0.92\n5.1\n15.6\nNA\n3.85\nNA\nNA\nNA\nNA\nNA\n    Tanzania\nAfrica\n45\n41\n46\n2.50\n110.0\n46.0\n19.0\n2.42\n2.65\n2.42\n6.20\n62\n31\n  \n  \n  \n\n\n\n\n\nThen, we make a description of all the numeric values.\n\n\nCode\nworld |&gt; \n  select(where(is.numeric)) |&gt; \n  skim() |&gt; \n  select(-1) |&gt; \n  gt() |&gt; \n  fmt_number(\n    columns = 3:10,\n    decimals = 2\n  ) |&gt; \n  cols_label(\n    skim_variable = \"variable\",\n    n_missing = \"missing\",\n    numeric.mean = \"mean\",\n    numeric.sd = \"std\",\n    numeric.p0 = \"p0\",\n    numeric.p25 = \"p25\",\n    numeric.p50 = \"p50\",\n    numeric.p75 = \"p75\",\n    numeric.p100 = \"p100\",\n    numeric.hist = \"histogram\"\n  ) |&gt; \n  cols_align(\n    columns = -1,\n    align = \"center\"\n  )\n\n\n\n\n\n\nTable 2:  Summary of numeric variables for the World data \n  \n    \n    \n      variable\n      missing\n      complete_rate\n      mean\n      std\n      p0\n      p25\n      p50\n      p75\n      p100\n      histogram\n    \n  \n  \n    lifeexpf\n0\n1.00\n70.16\n10.57\n43.00\n67.00\n74.00\n78.00\n82.00\n▂▂▁▅▇\n    lifeexpm\n0\n1.00\n64.92\n9.27\n41.00\n61.00\n67.00\n72.00\n76.00\n▂▂▂▇▇\n    literacy\n2\n0.98\n78.34\n22.88\n18.00\n63.00\n88.00\n98.00\n100.00\n▁▂▂▂▇\n    popincr\n0\n1.00\n1.68\n1.20\n−0.30\n0.52\n1.80\n2.68\n5.24\n▇▅▇▃▁\n    babymort\n0\n1.00\n42.31\n38.08\n4.00\n9.30\n27.70\n63.00\n168.00\n▇▃▁▂▁\n    birthr\n0\n1.00\n25.92\n12.36\n10.00\n14.00\n25.00\n35.00\n53.00\n▇▃▃▃▂\n    deathr\n1\n0.99\n9.56\n4.25\n2.00\n6.85\n9.00\n11.00\n24.00\n▅▇▅▁▁\n    gdp\n0\n1.00\n3.42\n0.62\n2.09\n3.00\n3.48\n3.87\n4.37\n▃▅▇▇▇\n    aidsr\n3\n0.97\n1.38\n0.71\n0.00\n0.77\n1.38\n1.86\n3.18\n▃▇▇▃▂\n    bdratio\n1\n0.99\n3.20\n2.12\n0.92\n1.54\n2.67\n4.18\n14.00\n▇▃▁▁▁\n    fertilty\n2\n0.98\n3.56\n1.90\n1.30\n1.88\n3.05\n5.00\n8.19\n▇▅▂▃▁\n    literacym\n24\n0.78\n78.73\n20.45\n28.00\n63.00\n87.00\n96.00\n100.00\n▁▁▃▂▇\n    literacyf\n24\n0.78\n67.26\n28.61\n9.00\n45.00\n71.00\n93.00\n100.00\n▂▂▂▃▇\n  \n  \n  \n\n\n\n\n\nWe see from Table 2 that some of the variables have missing data, specifically, the literacym variable has complete rate of 78%. Also, the standard deviation from each variable is in a different scale, ranging from 0.62 units in gdp to 38.08 units in babymort. This makes sense because some variables are in a log-scale.\n\n\n\n\n\n\nNote\n\n\n\nGiven this scenario, we would prefer to perform pca with the correlation matrix."
  },
  {
    "objectID": "index.html#real-work",
    "href": "index.html#real-work",
    "title": "Exam-01",
    "section": "",
    "text": "We perform two principal component analysis using: a) the covariance matrix and b) the correlation matrix.\n\n\nCode\n# get complete cases\nworld_complete = world |&gt; \n  drop_na()\n\n# for the covariance matrix\npca_cov = world_complete |&gt; \n  select(-c(1,2)) |&gt; \n  prcomp()\n\n# for the correlation matrix\npca_cor = world_complete |&gt; \n  select(-c(1,2)) |&gt; \n  prcomp(scale = TRUE)\n\n# matrix with loadings\nloadings = bind_rows(\n  pca_cov |&gt; \n  tidy(matrix = \"rotation\") |&gt; \n  mutate(matrix = factor(\"covariance\")),\n  pca_cor |&gt; \n  tidy(matrix = \"rotation\") |&gt; \n  mutate(matrix = factor(\"correlation\"))\n)\n\n\nWe plot the differences for the first two pcs using each method.\nOption 1:\n\n\nCode\nplot_01 = tibble(cor = pca_cor$rotation[,1], cov = pca_cov$rotation[,1]) \nplot_02 = tibble(cor = pca_cor$rotation[,2], cov = pca_cov$rotation[,2]) \n\np01 = plot_01 |&gt; \n  ggplot() +\n  geom_point(aes(x = cor, y = cov), size = 3) +\n  geom_abline(intercept = 0, slope = 1, linetype = \"dashed\", color = \"red\", size = 1.3) +\n  xlim(c(-0.65, 0.65)) +\n  ylim(c(-0.65, 0.65)) +\n  theme_bw() +\n  xlab(\"PC1 (cor)\") +\n  ylab(\"PC1 (cov)\")\n\np02 = plot_02 |&gt; \n  ggplot() +\n  geom_point(aes(x = cor, y = cov), size = 3) +\n  geom_abline(intercept = 0, slope = 1, linetype = \"dashed\", color = \"red\", size = 1.3) +\n  xlim(c(-0.65, 0.65)) +\n  ylim(c(-0.65, 0.65)) +\n  theme_bw() +\n  xlab(\"PC2 (cor)\") +\n  ylab(\"PC2 (cov)\")\n\np01 | p02\n\n\n\n\n\nFigure 1: Representations of the loadings\n\n\n\n\nOption 2:\n\n\nCode\nloadings |&gt; \n  filter(PC == c(1,2)) |&gt; \n  ggplot() +\n  geom_density(aes(x = value, fill = matrix, color = matrix), alpha = 0.6) +\n  facet_wrap(vars(PC), nrow = 1) +\n  theme_bw() +\n  theme(legend.position = \"bottom\") +\n  scale_color_brewer(palette = \"Pastel1\") +\n  scale_fill_brewer(palette = \"Pastel1\")\n\n\n\n\n\nFigure 2: Representations of the loadings\n\n\n\n\nOption 3:\n\n\nCode\nloadings |&gt; \n  filter(PC == c(1,2)) |&gt; \n  ggplot() +\n  geom_boxplot(aes(x = value, y = matrix, fill = matrix, color = matrix), alpha = 0.6) +\n  facet_wrap(vars(PC), nrow = 1) +\n  theme_bw() +\n  theme(legend.position = \"none\") +\n  scale_color_brewer(palette = \"Accent\") +\n  scale_fill_brewer(palette = \"Accent\")\n\n\n\n\n\nFigure 3: Representations of the loadings\n\n\n\n\nOption 4:\n\n\nCode\np03 = pca_cov %&gt;%\n  tidy(matrix = \"eigenvalues\") %&gt;%\n  ggplot(aes(PC, percent)) +\n  geom_col(fill = \"#56B4E9\", alpha = 0.8) +\n  xlab(\"PCA (cov)\") +\n  scale_x_continuous(breaks = 1:9) +\n  scale_y_continuous(\n    labels = scales::percent_format(),\n    expand = expansion(mult = c(0, 0.01))\n  ) +\n  theme_minimal_hgrid(12)\n\np04 = pca_cor %&gt;%\n  tidy(matrix = \"eigenvalues\") %&gt;%\n  ggplot(aes(PC, percent)) +\n  xlab(\"PCA (cor)\") +\n  geom_col(fill = \"#56B4E9\", alpha = 0.8) +\n  scale_x_continuous(breaks = 1:9) +\n  scale_y_continuous(\n    labels = scales::percent_format(),\n    expand = expansion(mult = c(0, 0.01))\n  ) +\n  theme_minimal_hgrid(12)\n\np03 | p04\n\n\n\n\n\nFigure 4: Representations of the loadings\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCode\nworld_complete = pca_cor |&gt;\n  augment(world_complete)"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site\n\n1 + 1\n\n[1] 2"
  }
]